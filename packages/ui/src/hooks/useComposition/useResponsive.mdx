import { Meta, Source, Canvas } from '@storybook/blocks';

<Meta title="useComposition" />

# useComposition

`useComposition` is a small utility hook for implementation the [Radix-UI Slot component](https://www.radix-ui.com/primitives/docs/utilities/slot). It ensures that implementation is consistent across the codebase. It returns the `Comp` and `Slottable` to use for your implementation. See [Composition](/docs/docs-composition--docs) or the official [Radix-UI documentation](https://www.radix-ui.com/primitives/docs/guides/composition) for more information.

<Source
    language="tsx"
    code={`
interface ButtonProps { asChild?:boolean, ... }
 
const Button = ({ asChild, ...rest }: ButtonProps) => {
    const { Comp } = useComposition( { asChild, tag: 'button' });
    return <Comp {...rest} />;
}

...

<Button>Click me</Button> // renders Button as <button>

<Button asChild> // renders Button as <a>
    <a href="#">Click me</a>
</Button>

`}/>

When you want to add elements next to the children you can use the `Slottable` component.

> **`Slottable` has to be a direct child of the `Comp` component or it will not work**. If you need to wrap the children you can use the `composeWrappedSlottable` function.

<Source
    language="tsx"
    code={`
interface ButtonProps { asChild?:boolean, ... }
 
const Button = ({ asChild, children, ...rest }: ButtonProps) => {
    const { Comp, Slottable } = useComposition( { asChild, tag: 'button' });
    return (
        <Comp {...rest}>
            {leftElement}
            <Slottable>{children}</Slottable>
            {rightElement}
        </Comp>
    );
}
`}
/>

An example of using `composeWrappedSlottable` to wrap the children of the `Slottable` component:

<Source
    language="tsx"
    code={`
interface ButtonProps { asChild?:boolean, ... }
 
const Button = ({ asChild, children, ...rest }: ButtonProps) => {
    const { Comp, composeWrappedSlottable } = useComposition({ asChild, tag: 'button' });
    const Label = composeWrappedSlottable(
        { 
            asChild, 
            children, 
            Wrapper: ({ children }) => <span className="min-w-0 truncate">{children}</span> 
        }
    );

    return (
        <Comp {...rest}>
            {leftElement}
            {Label}
            {rightElement}
        </Comp>
    );

}
`}
/>
